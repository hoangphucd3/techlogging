<% content_for(:body_attributes) do %> data-turbolinks="false"<% end %>

<% content_for :header_javascripts do %>
  <%= tinymce_assets %>
  <%= tinymce %>
<% end %>

<% content_for :footer_javascripts do %>
  <script type="text/javascript" charset="utf-8">
      var _techloggingPluploadSettings = {"defaults":{"file_data_name":"async-upload","url":"\/WordPress\/wp-admin\/async-upload.php","filters":{"max_file_size":"8388608b","mime_types":[{"extensions":"jpg,jpeg,jpe,gif,png,bmp,tiff,tif,ico,asf,asx,wmv,wmx,wm,avi,divx,flv,mov,qt,mpeg,mpg,mpe,mp4,m4v,ogv,webm,mkv,3gp,3gpp,3g2,3gp2,txt,asc,c,cc,h,srt,csv,tsv,ics,rtx,css,htm,html,vtt,dfxp,mp3,m4a,m4b,ra,ram,wav,ogg,oga,mid,midi,wma,wax,mka,rtf,js,pdf,class,tar,zip,gz,gzip,rar,7z,psd,xcf,doc,pot,pps,ppt,wri,xla,xls,xlt,xlw,mdb,mpp,docx,docm,dotx,dotm,xlsx,xlsm,xlsb,xltx,xltm,xlam,pptx,pptm,ppsx,ppsm,potx,potm,ppam,sldx,sldm,onetoc,onetoc2,onetmp,onepkg,oxps,xps,odt,odp,ods,odg,odc,odb,odf,wp,wpd,key,numbers,pages"}]},"multipart_params":{"action":"upload-attachment","_wpnonce":"29fb5452d0"}},"browser":{"mobile":false,"supported":true},"limitExceeded":false};var wpApiSettings = {"root":"https:\/\/demos1.softaculous.com\/WordPress\/wp-json\/","nonce":"e132fdbbf3","versionString":"wp\/v2\/"};var _wpMediaViewsL10n = {"url":"URL","addMedia":"Add Media","search":"Search","select":"Select","cancel":"Cancel","update":"Update","replace":"Replace","remove":"Remove","back":"Back","selected":"%d selected","dragInfo":"Drag and drop to reorder media files.","uploadFilesTitle":"Upload Files","uploadImagesTitle":"Upload Images","mediaLibraryTitle":"Media Library","insertMediaTitle":"Add Media","createNewGallery":"Create a new gallery","createNewPlaylist":"Create a new playlist","createNewVideoPlaylist":"Create a new video playlist","returnToLibrary":"\u2190 Return to library","allMediaItems":"All media items","allDates":"All dates","noItemsFound":"No items found.","insertIntoPost":"Insert into post","unattached":"Unattached","trash":"Trash","uploadedToThisPost":"Uploaded to this post","warnDelete":"You are about to permanently delete this item from your site.\nThis action cannot be undone.\n 'Cancel' to stop, 'OK' to delete.","warnBulkDelete":"You are about to permanently delete these items from your site.\nThis action cannot be undone.\n 'Cancel' to stop, 'OK' to delete.","warnBulkTrash":"You are about to trash these items.\n  'Cancel' to stop, 'OK' to delete.","bulkSelect":"Bulk Select","cancelSelection":"Cancel Selection","trashSelected":"Trash Selected","untrashSelected":"Untrash Selected","deleteSelected":"Delete Selected","deletePermanently":"Delete Permanently","apply":"Apply","filterByDate":"Filter by date","filterByType":"Filter by type","searchMediaLabel":"Search Media","searchMediaPlaceholder":"Search media items...","noMedia":"No media files found.","attachmentDetails":"Attachment Details","insertFromUrlTitle":"Insert from URL","setFeaturedImageTitle":"Featured Image","setFeaturedImage":"Set featured image","createGalleryTitle":"Create Gallery","editGalleryTitle":"Edit Gallery","cancelGalleryTitle":"\u2190 Cancel Gallery","insertGallery":"Insert gallery","updateGallery":"Update gallery","addToGallery":"Add to gallery","addToGalleryTitle":"Add to Gallery","reverseOrder":"Reverse order","imageDetailsTitle":"Image Details","imageReplaceTitle":"Replace Image","imageDetailsCancel":"Cancel Edit","editImage":"Edit Image","chooseImage":"Choose Image","selectAndCrop":"Select and Crop","skipCropping":"Skip Cropping","cropImage":"Crop Image","cropYourImage":"Crop your image","cropping":"Cropping\u2026","suggestedDimensions":"Suggested image dimensions: %1$s by %2$s pixels.","cropError":"There has been an error cropping your image.","audioDetailsTitle":"Audio Details","audioReplaceTitle":"Replace Audio","audioAddSourceTitle":"Add Audio Source","audioDetailsCancel":"Cancel Edit","videoDetailsTitle":"Video Details","videoReplaceTitle":"Replace Video","videoAddSourceTitle":"Add Video Source","videoDetailsCancel":"Cancel Edit","videoSelectPosterImageTitle":"Select Poster Image","videoAddTrackTitle":"Add Subtitles","playlistDragInfo":"Drag and drop to reorder tracks.","createPlaylistTitle":"Create Audio Playlist","editPlaylistTitle":"Edit Audio Playlist","cancelPlaylistTitle":"\u2190 Cancel Audio Playlist","insertPlaylist":"Insert audio playlist","updatePlaylist":"Update audio playlist","addToPlaylist":"Add to audio playlist","addToPlaylistTitle":"Add to Audio Playlist","videoPlaylistDragInfo":"Drag and drop to reorder videos.","createVideoPlaylistTitle":"Create Video Playlist","editVideoPlaylistTitle":"Edit Video Playlist","cancelVideoPlaylistTitle":"\u2190 Cancel Video Playlist","insertVideoPlaylist":"Insert video playlist","updateVideoPlaylist":"Update video playlist","addToVideoPlaylist":"Add to video playlist","addToVideoPlaylistTitle":"Add to Video Playlist","settings":{"tabs":[],"tabUrl":"https:\/\/demos1.softaculous.com\/WordPress\/wp-admin\/media-upload.php?chromeless=1","mimeTypes":{"image":"Images","audio":"Audio","video":"Video"},"captions":true,"nonce":{"sendToEditor":"daa8faa37f"},"post":{"id":3,"nonce":"0d9dd29aef","featuredImageId":-1},"defaultProps":{"link":"none","align":"","size":""},"attachmentCounts":{"audio":1,"video":1},"oEmbedProxyUrl":"https:\/\/demos1.softaculous.com\/WordPress\/wp-json\/oembed\/1.0\/proxy","embedExts":["mp3","ogg","m4a","wav","mp4","m4v","webm","ogv","flv"],"embedMimes":{"mp3":"audio\/mpeg","ogg":"audio\/ogg","m4a":"audio\/mpeg","wav":"audio\/wav","mp4":"video\/mp4","m4v":"video\/mp4","webm":"video\/webm","ogv":"video\/ogg","flv":"video\/x-flv"},"contentWidth":525,"months":[],"mediaTrash":0}};var mceViewL10n = {"shortcodes":["wp_caption","caption","gallery","playlist","audio","video","embed"]};var imageEditL10n = {"error":"Could not load the preview image. Please reload the page and try again."};var authcheckL10n = {"beforeunload":"Your session has expired. You can log in again from this page or go to the login page.","interval":"180"};var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction","dfw":"Distraction-free writing mode","strong":"Bold","strongClose":"Close bold tag","em":"Italic","emClose":"Close italic tag","link":"Insert link","blockquote":"Blockquote","blockquoteClose":"Close blockquote tag","del":"Deleted text (strikethrough)","delClose":"Close deleted text tag","ins":"Inserted text","insClose":"Close inserted text tag","image":"Insert image","ul":"Bulleted list","ulClose":"Close bulleted list tag","ol":"Numbered list","olClose":"Close numbered list tag","li":"List item","liClose":"Close list item tag","code":"Code","codeClose":"Close code tag","more":"Insert Read More tag"};var wpLinkL10n = {"title":"Insert\/edit link","update":"Update","save":"Add Link","noTitle":"(no title)","noMatchesFound":"No results found.","linkSelected":"Link selected.","linkInserted":"Link inserted."};
  </script>
  <%= render 'layouts/media_assets' %>
  <%= javascript_include_tag('admin/articles')  %>
<% end %>

<%= render 'layouts/admin/errors', object: @article %>

<div class="form-group">
  <%= f.label :title, 'Title' %>
  <%= f.text_field :title, class: 'form-control' %>
</div>

<div class="form-group">
  <%= f.label :description, 'Description' %>
  <%= f.text_area :description, class: 'form-control' %>
</div>

<div class="form-group">
  <%= f.label :feature_photo, 'Feature photo' %>
  <%= f.hidden_field :feature_photo,
                     value: @article.cached_feature_photo_data,
                     id: 'article-feature-photo-upload-result' %>
  <%= f.file_field :feature_photo,
                   accept: ImageUploader::ALLOWED_TYPES.join(','),
                   data: {preview_element: 'preview-feature-photo',
                          upload_result_element: 'article-feature-photo-upload-result'},
                   class: 'form-control-file' %>
</div>
<div class="image-preview mb-3">
  <%= image_tag @article.feature_photo_url(:thumbnail).to_s,
                width: '300',
                class: 'img-thumbnail file-upload-preview',
                id: 'preview-feature-photo' %>
</div>

<div class="form-group">
  <%= f.label :status, 'Status' %>
  <div class="btn-group btn-group-toggle" data-toggle="buttons">
    <%= f.collection_radio_buttons :status, Article.statuses, :first, :first, { include_hidden: false }, {} do |r|  %>
      <label class="btn btn-secondary <%= 'active' if f.object.status == r.value %>">
        <%= r.radio_button %>
        <%= r.label %>
      </label>
    <% end %>
  </div>
</div>

<div class="form-group">
  <%= f.label :topic_terms, 'Topics' %>
  <%= f.collection_check_boxes :taxonomy_term_relationship_ids,
                               TaxonomyTerm.topic,
                               :id,
                               :name,
                               {},
                               {} do |c| %>
    <div class="form-check">
      <%= c.check_box class: 'form-check-input',
                      checked: @article.taxonomy_term_ids.include?(c.value)  %>
      <%= c.label %>
    </div>
  <% end %>
</div>

<div class="form-group">
  <%= f.label :content, 'Content' %>
  <div id="content-editor-tools" class="mb-2">
    <%= button_tag 'Add Media', id: 'insert-media-button',
                   class: 'btn btn-primary insert-media',
                   'data-editor': 'content',
                   type: 'button' %>
  </div>
  <%= f.text_area :content, class: 'form-control tinymce' %>
</div>

<%= f.submit 'Post', class: 'btn btn-primary mb-2' %>
